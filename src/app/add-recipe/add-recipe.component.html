<div class="container">
  <div class="display-4">
      Add a new recipe
  </div>
  <form [formGroup]="recipeFormGroup" (ngSubmit)="addRecipe()" class="needs-validation d-grid gap-1" novalidate>
    <!-- Rezepttitel  -->
    <label class="form-label">Rezepttitel</label>
    <div class="input-group mb-3">
        <input type="text" class="form-control" formControlName="name" placeholder="Vergebe einen Namen ..." required>
        <div *ngIf="recipeFormGroup.controls.name.touched" [ngClass]="{'valid-feedback' : recipeFormGroup.controls.name.invalid === false}">
            Bitte gib deinem Rezept einen Namen.
        </div>
    </div>
    
    <!-- Kategorie -->
    <label class="form-label">Kategorie</label>
    <div class="input-group mb-3">
      
      <select class="form-control" formControlName="category">
        <option value="" disabled selected>W채hle eine Kategorie ...</option>
        <option *ngFor="let category of categories">{{ category.name }}</option>
      </select>
    </div>

    <!-- Rezeptzubereitung -->      
    <label class="form-label">Rezeptzubereitung</label>
    <textarea class="form-control" formControlName="description" rows="7" placeholder="Detaillierte Beschreibung hinzuf체gen ..." required></textarea>

    <div *ngIf="recipeFormGroup.controls.description.touched" [ngClass]="{'valid-feedback' : recipeFormGroup.controls.description.invalid === false}">
        Bitte gib eine Beschreibung mit mindestens 10 Zeichen ein.
    </div>

    <!-- Zutaten -->
    <label for="ingredients">Zutaten</label>
    <textarea class="form-control" formControlName="ingredients" rows="4" placeholder="Zutaten hinzuf체gen" required></textarea>

    <div *ngIf="recipeFormGroup.controls.ingredients.touched" [ngClass]="{'valid-feedback' : recipeFormGroup.controls.ingredients.invalid === false}">
        Bitte gib eine Zutateliste mit mindestens 10 Zeichen ein.
    </div>
    

    <!-- Link -->
    <label for="url">Link</label>
    <input type="text" class="form-control" formControlName="url" placeholder="Link hinzuf체gen">
    

    <!-- Image  -->   
    <div class="input-group mb-3">
      <input type="file" class="form-control" formControlName="image" (change)="fileUpload($event)">
      <label class="form-label" for="customFile" for="image"></label>
    </div>

    <div *ngIf="spinnerVisible" class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
          
    <!-- Submit -->
    <div>
        <button class="btn" type="submit" 
        [disabled]="!recipeFormGroup.valid"
        [ngClass]="[recipeFormGroup.valid === true ? 'btn-outline-success' : 'btn-outline-danger']"
        >Save</button>
    </div>
  </form>
</div>

<!-- Example starter JavaScript for disabling form submissions if there are invalid fields  -->
<script>
  (function() {
    'use strict';
    window.addEventListener('load', function() {
      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      var forms = document.getElementsByClassName('needs-validation');
      // Loop over them and prevent submission
      var validation = Array.prototype.filter.call(forms, function(form) {
        form.addEventListener('submit', function(event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    }, false);
  })();
  </script>